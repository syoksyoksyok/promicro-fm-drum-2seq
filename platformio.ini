; PlatformIO Project Configuration File
;
; Pro Micro (ATmega32U4) 2ch FM Drum Machine
;
; ビルド: pio run
; アップロード: pio run --target upload
; シリアルモニタ: pio device monitor

[env:sparkfun_promicro16]
platform = atmelavr
board = sparkfun_promicro16
framework = arduino

; ボーレート設定
monitor_speed = 115200

; ビルドフラグ
build_flags =
    -Os                    ; サイズ最適化
    -fno-exceptions        ; 例外無効化（サイズ削減）
    -fno-threadsafe-statics ; スレッドセーフ静的変数無効化
    -flto                  ; Link Time Optimization
    -Wall                  ; 全警告表示

; アップロード設定
upload_protocol = avr109
upload_speed = 57600

; Pro MicroはUF2ブートローダーを標準でサポートしていないため、
; 通常のAVR109ブートローダー経由でHEXファイルをアップロードします。
;
; UF2形式で書き込みたい場合は、以下の手順が必要です：
; 1. Pro MicroにQMK/Catalina等のUF2対応ブートローダーを書き込む
; 2. upload_protocol を uf2 に変更
;
; 標準のPro Microでは avr109 プロトコルを使用し、
; avrdudeで書き込みます。
;
; 手動書き込みコマンド例:
; avrdude -p atmega32u4 -c avr109 -P /dev/ttyACM0 -b 57600 -U flash:w:.pio/build/sparkfun_promicro16/firmware.hex:i
;
; Windowsの場合:
; avrdude -p atmega32u4 -c avr109 -P COM3 -b 57600 -U flash:w:.pio\build\sparkfun_promicro16\firmware.hex:i
